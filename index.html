<!DOCTYPE html><html lang="en"><head>
	<meta name="generator" content="Hugo 0.127.0">
    <meta charset="utf-8">
<title>Large language models as oracles for instantiating ontologies with domain-specific knowledge</title>
<meta name="description" content="Presentation for the paper 'Large language models as oracles for instantiating ontologies with domain-specific knowledge'">
<meta name="author" content="Giovanni Ciatto">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link rel="stylesheet" href="/presentation-llm4kg/reveal-js/dist/reset.css">
<link rel="stylesheet" href="/presentation-llm4kg/reveal-js/dist/reveal.css">
  <link rel="stylesheet" href="/presentation-llm4kg/css/custom-theme.min.8819225ba9045f059db0ec8e63c9fe9ecc945835383b0c2425763b28285adb6f.css" id="theme"><link rel="stylesheet" href="/presentation-llm4kg/highlight-js/solarized-dark.min.css">
<link rel="stylesheet" href="https://gitcdn.link/repo/DanySK/css-blur-animation/master/blur.css">
<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Oxygen Mono" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Ubuntu Mono" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
<script src="https://kit.fontawesome.com/81ac037be0.js" crossorigin="anonymous"></script>

  </head>
  <body>
    
    <div class="reveal">
      <div class="slides">
  

    <section><h1 id="large-language-models-as-oracles-for-instantiating-ontologies-with-domain-specific-knowledge">Large language models as oracles for instantiating ontologies with domain-specific knowledge</h1>
<p><a href="https://www.unibo.it/sitoweb/Giovanni.Ciatto/en">Giovanni Ciatto</a>,
<a href="https://www.unibo.it/sitoweb/Andrea.Agiollo/en">Andrea Agiollo</a>,
<a href="https://www.unibo.it/sitoweb/Matteo.Magnini/en">Matteo Magnini</a>,
and
<a href="https://www.unibo.it/sitoweb/Andrea.Omicini/en">Andrea Omicini</a></p>
<br>
<p>ArXiv preprint: <a href="https://arxiv.org/abs/2404.04108">arXiv:2404.04108</a></p>
<br>
<p>(Currently under revision for the <a href="https://www.sciencedirect.com/journal/knowledge-based-systems">Knowledge-Based Systems</a> journal.)</p>
</section><section>
<h2 id="context-pt-1">Context (pt. 1)</h2>
<h3 id="the-problem">The problem</h3>
<ul>
<li>
<p>Many knowledge-based applications require <em>structured data</em> for their operation</p>
</li>
<li>
<p>These systems commonly <em>adapt</em> their behaviour to the available data…</p>
<ul>
<li>… and acquire new data <em>while</em> operating</li>
</ul>
</li>
<li>
<p>Notable example: <em>recommendation systems</em></p>
<ul>
<li>providing <em>hints</em> to users based on their <em>preferences</em>…</li>
<li>… and on the <em>profiles</em> of similar users</li>
</ul>
</li>
<li>
<p>Chicken-and-egg problem, namely the <em>cold-start</em>:</p>
<ol>
<li>the system needs data to operate effectively</li>
<li>the system acquires data while operating, from users</li>
<li>at the beginning there’s no data, and no users</li>
<li>how to escape this situation?</li>
</ol>
</li>
</ul>
</section><section>
<h2 id="context-pt-2">Context (pt. 2)</h2>
<h3 id="example">Example</h3>
<p>As part of the CHIST-ERA IV project <a href="https://expectation.ehealth.hevs.ch/posts/home/">“Expectation”</a>, we needed to:</p>
<ol>
<li>
<p>design a virtual coach for <em>nutrition</em></p>
<ul>
<li>giving personalised advices on <em>what to eat when</em> to users</li>
</ul>
</li>
<li>
<p>the system would need <em>data</em> about:</p>
<ul>
<li>food, e.g. recipes, their ingredients, their nutritional values, etc.</li>
<li>users, e.g. their preferences and their habits, goals, medical issues, etc.</li>
</ul>
</li>
<li>
<p><em>model</em> the data schema and <em>find</em> some data matching it</p>
</li>
</ol>
</section><section>
<h2 id="context-pt-3">Context (pt. 3)</h2>
<h3 id="the-insight">The insight</h3>
<blockquote>
<p>Obvious solution: <em>generating</em> (i.e., synthesizing) data</p>
</blockquote>
<br>
<p>Yet, the generated data should:</p>
<ul>
<li>be <em>syntactically</em> valid, i.e. match the <em>structure</em> expected by the system</li>
<li>be <em>likely</em>, and therefore <em>meaningful</em> for the system
<ul>
<li>in a nutshell: match the <em>domain</em> the system is going to be deployed into</li>
</ul>
</li>
</ul>
<h3 id="example-1">Example</h3>
<ol>
<li>Generate a schema for recipes and user profiles</li>
<li>Design the business logic on top of that</li>
<li>Generate data matching the schema</li>
</ol>
</section><section>


<section data-shortcode-section="">
<h2 id="background-pt-1">Background (pt. 1)</h2>
<h3 id="ontologies">Ontologies</h3>
<ul>
<li>
<p>Easy yet powerful means to represent <em>knowledge</em> in a structured way</p>
<ul>
<li>theoretically sound</li>
<li>widely used in <em>AI</em> and <em>knowledge engineering</em></li>
<li>good for engineering any sort of <em>data schema</em></li>
<li>technologically supported by the <em>Semantic Web</em> stack (e.g. OWL, RDF, etc.)</li>
</ul>
</li>
<li>
<p>In a nutshell:</p>
<ul>
<li><strong>concepts</strong> (a.k.a. <em>classes</em>) sets of <em>individuals</em> (a.k.a. <em>instances</em>)</li>
<li><strong>roles</strong> (a.k.a. <em>properties</em>) binary <em>relations</em> between individuals</li>
<li><strong>top</strong> and <strong>bottom</strong> concepts ($\top$ and $\bot$) for <em>universal</em> and <em>empty</em> sets
<ul>
<li>$\top$ (resp. $\bot$) is most commonly known as <code>Thing</code> (resp. <code>Nothing</code>)</li>
</ul>
</li>
<li><strong>$\mathcal{ALC}$</strong> (and variants) is the most common <em>Description Logic</em> used for ontologies</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="background-pt-2">Background (pt. 2)</h2>
<h3 id="ontologies-example">Ontologies example</h3>
<div class="multiCol "><div style="width: 25%; "></div>
<div style="width: 50%; "><p><img src="http://www.plantuml.com/plantuml/svg/TL11JiCm4Bpx5Nji3_O3eYXgLS49n8LZBsxYfcuTErexY0hw0IwyWtVm4rw2oTgjBqXHlBCxCxkQbGyImpGODihs97i53wfNjeCt1j0QwJrid6tL66vu_jUr52SXHTCm1fa3zJj7tHy2JwmA_BIRowSzB7u-FfUH73-tEwesWBQTVj7T94tPYoT5jtysEDxnGbU1zcjOLD6NLcO2cTp630eLS8wSDmKDdL5Rkt088xfHOJWljnQYNoori-K5GZIqwggYEs_AI6ONTatqxbKEer4nKWhm-Q1jpn9OMpr8ay16XbGzkiahncRgNwey4-cXLgINE8jIaC4DkJmgn3DZ6qdvpQEPJ936iGaSUKEmWlOWlV9NkrxYNYlJPOpVNqFfcUUbCN7o16fkKY-wEtVozmx9GQ1ewFoyTsxNmWXgbu8BModRJOFv1G00" alt="Overview on ontologies"></p>
</div>
<div style="width: 50%; "><p>In $\mathcal{ALC}$ Description Logic:</p>
<ul>
<li>$Animal \sqsubset \top$</li>
<li>$Cat, Mouse \sqsubset Animal$</li>
<li>$Cat \sqsubseteq \exists \mathsf{chases}.Mouse$</li>
<li>$Mouse \sqsubseteq \exists \mathsf{cooksFor}.Cat$</li>
<li>$\mathtt{tom}, \mathtt{garfield} : Cat$</li>
<li>$\mathtt{jerry}, \mathtt{rémy} : Mouse$</li>
<li>$\mathsf{chases}(\mathtt{tom}, \mathtt{jerry})$</li>
<li>$\mathsf{cooksFor}(\mathtt{rémy}, \mathtt{garfield})$</li>
</ul>
</div>
</div>
</section><section>
<h2 id="background-pt-3">Background (pt. 3)</h2>
<h3 id="definitions-vs-assertions">Definitions vs. Assertions</h3>
<ul>
<li>
<p><strong>Definitions</strong> are axioms defining concepts, roles, and their relationships</p>
<ul>
<li>these are called <strong>TBox</strong> (for <em>Terminological Box</em>) in $\mathcal{ALC}$</li>
<li>examples:
<ul>
<li>$Animal \sqsubset \top$</li>
<li>$Cat, Mouse \sqsubset Animal$</li>
<li>$Cat \sqsubseteq \exists \mathsf{chases}.Mouse$</li>
<li>$Mouse \sqsubseteq \exists \mathsf{cooksFor}.Cat$</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Assertions</strong> are axioms assigning individuals to concepts or to roles</p>
<ul>
<li>these are called <strong>ABox</strong> (for <em>Assertional Box</em>) in $\mathcal{ALC}$</li>
<li>examples:
<ul>
<li>$\mathtt{tom}, \mathtt{garfield} : Cat$</li>
<li>$\mathtt{jerry}, \mathtt{rémy} : Mouse$</li>
<li>$\mathsf{chases}(\mathtt{tom}, \mathtt{jerry})$</li>
<li>$\mathsf{cooksFor}(\mathtt{rémy}, \mathtt{garfield})$</li>
</ul>
</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="background-pt-4">Background (pt. 4)</h2>
<h3 id="how-are-ontologies-constructed">How are ontologies constructed?</h3>
<p>Two possibly inter-leaved phases:</p>
<ol>
<li>
<p><strong>“schema design”</strong> phase: defining concepts, roles, and their relationships</p>
<ul>
<li>i.e.: edit the <em>TBox</em></li>
</ul>
</li>
<li>
<p><strong>“population”</strong> phase: assigning individuals to concepts or to roles</p>
<ul>
<li>i.e.: edit the <em>ABox</em></li>
</ul>
</li>
</ol>
<br>
<span class="fragment ">
  <blockquote>
<p>The ontology <strong>population</strong> problem is about <em>populating</em> an ontology with instances, i.e. <em>individuals</em></p>
<ul>
<li>this is often done <em>manually</em></li>
<li>called “ontology <strong>learning</strong>” when done <em>(semi-)automatically</em> from data</li>
</ul>
</blockquote>
</span>
</section><section>
<h2 id="background-pt-5">Background (pt. 5)</h2>
<h3 id="about-ontology-population">About ontology population</h3>
<ul>
<li>
<p><strong>Manual</strong> population:</p>
<ul>
<li><em>time-consuming</em> and <em>error-prone</em></li>
<li>requires <em>domain experts</em> (most commonly communities)</li>
<li>potentially very precise ($\approx$ adherent to reality)
<ul>
<li>and <em>high-quality</em> on the long run</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Automatic</strong> population:</p>
<ul>
<li><em>faster</em> and <em>less error-prone</em></li>
<li>requires <em>datasets</em> or big <em>corpus of documents</em> (most commonly)</li>
<li>often <strong>non</strong>-<em>incremental</em></li>
</ul>
</li>
</ul>

</section>
</section><section>
<h2 id="background-pt-6">Background (pt. 6)</h2>
<h3 id="large-language-models-llms">Large Language Models (LLMs)</h3>
<p><img src="./llm-concept.svg" alt="LLM concept"></p>
<ul>
<li>Text in (<strong>query</strong>, a.k.a. <em>prompt</em>) $\rightarrow$ Text out (<strong>response</strong>, a.k.a. <em>completion</em>)</li>
<li><strong>Pre-trained</strong> on the <em>publicly accessible</em> Web (allegedly) $\Rightarrow$ plenty of <em>domain-specific</em> knowledge, for most domains</li>
<li><strong>X-as-a-Service</strong> paradigm $\Rightarrow$ <em>pay-per-use</em> + <em>rate limits</em></li>
<li><strong>Temperature</strong> parameter $\rightarrow$ regulates <em>creativity</em> ($\approx$ randomness) of the response</li>
</ul>
</section><section>
<h2 id="contribution">Contribution</h2>
<blockquote>
<p><strong>Insight</strong>: replace domain experts with <em>large language models</em> (LLMs),
<br>
treating them as <strong>oracles</strong> for <em>automating</em> ontology population</p>
</blockquote>
<p>Let’s discuss <em>how</em>!</p>
</section><section>
<h2 id="problem-statement-pt-1">Problem statement (pt. 1)</h2>
<ul>
<li>
<p>Stemming from:</p>
<ol>
<li>
<p>a <em>partially</em>- (or, possibly, <em>non</em>-)instantiated <strong>ontology</strong> $\mathcal{O} = \mathcal{C} \cup \mathcal{P} \cup \mathcal{X}$ consisting of:</p>
<ul>
<li>a <em>non-empty</em> set of <strong>concept</strong> definitions $\mathcal{C}$</li>
<li>a <em>non-empty</em> set of <strong>property</strong> definitions $\mathcal{P}$</li>
<li>a <em>possibly-empty</em> set of <strong>assertions</strong> $\mathcal{X}$</li>
</ul>
</li>
<li>
<p>a <strong>subsumption</strong> (a.k.a. <em>sub-class</em>) <strong>relation</strong> $\sqsubseteq$ between concepts in $\mathcal{C}$</p>
<ul>
<li>spawning a <em>directed acyclic graph</em> (DAG) of concepts</li>
</ul>
</li>
<li>
<p>a trained LLM oracle $\mathcal{L}$</p>
</li>
<li>
<p>a set of <strong>query templates</strong> $\mathcal{T}$ for generating prompts for $\mathcal{L}$</p>
</li>
</ol>
</li>
<li>
<p>… produce $\mathcal{X}’ \sqsupset \mathcal{X}$ such that:</p>
<ol>
<li>$\mathcal{X}’$ contains <strong>novel</strong> individual and role assertions (w.r.t. $\mathcal{X}$)</li>
<li>all assertions in $\mathcal{X}’$ are <strong>consistent</strong> w.r.t. $\mathcal{C}$ and $\mathcal{P}$, meaning that
<ul>
<li>each individual in $\mathcal{X}’$ is assigned to the <em>most adequate</em> concept in $\mathcal{C}$</li>
<li>$\mathcal{X}’$ contains role assertions matching the properties in $\mathcal{P}$ <em>as well as</em> <strong>reality</strong></li>
</ul>
</li>
</ol>
</li>
</ul>
</section><section>
<h2 id="problem-statement-pt-2">Problem statement (pt. 2)</h2>
<h3 id="example-2">Example</h3>

<div class="multiCol "><div style="width: 25%; "></div>
<div style="width: 25%; "><p><img src="http://www.plantuml.com/plantuml/svg/SoWkIImgAStDuKhEIImkLWZ9oCnBvu9o7FCoSnDXCiw99L2MRtvfSIeN5rYfWasDhYvC8OG22u6K8_DXce322df5UdOGlfL2SaPYSMenMDX6BqSFBfoVdrtibb_4nLNBvP2Qbm9q8000" alt="Uninstantiated ontology"></p>
</div>
<div style="width: 10%; ">$\xrightarrow{\text{after}}$</div>
<div style="width: 50%; "><p><img src="http://www.plantuml.com/plantuml/svg/JOxD3S8m38NlcI8BE0EWgYf2uiQD1K8R-aDIItPwG8A1c8F527KJzHI_zpw_kE5eAIx1gzPRPdqTnhbNcpZEOx0vETcuJHTSs2crehfw0MHG7h4IljTv2M-JQwEE6F8uEQAdKedN21siqGgBb3YP6WXgaGVT3fOTbxhUqdrqlikQlf-mxopvhbYOdEWA_EQbTiG7dv6amP2fvVpoxz-kZ3V5BWjlrRYvMuB_0G00" alt="Instantiated ontology"></p>
</div>
</div>
</section><section>


<section data-shortcode-section="">
<h2 id="kgfiller">KgFiller</h2>
<p>Our algorithm for <em>ontology population</em> through LLM, stepping through <strong>4 phases</strong>:</p>
<ol>
<li>
<p><strong>population</strong> phase: each concept in $\mathcal{C}$ is <em>populated</em> with a set of individuals</p>
</li>
<li>
<p><strong>relation</strong> phase: each property in $\mathcal{P}$ is <em>populated</em> with a set of role assertions</p>
<ul>
<li>as a by-product, some concepts may be <em>populated</em> even further</li>
</ul>
</li>
<li>
<p><strong>redistribution</strong> phase: some individuals are <em>reassigned</em> to more <strong>adequate</strong> concepts</p>
</li>
<li>
<p><strong>merge</strong> phase: <em>similar</em> individuals are <em>merged</em> into a single one</p>
<ul>
<li>$\approx$ duplicates removal</li>
</ul>
</li>
</ol>
</section><section>
<h2 id="about-templates">About templates</h2>
<blockquote>
<p><strong>Templates</strong> $\approx$ a string <em>named placeholders</em> to be <em>filled</em> with actual values via <em>interpolation</em></p>
</blockquote>
<ul>
<li>think of them as C’s <code>printf</code> format strings
<ul>
<li>e.g. <code>"Hello &lt;WHO&gt;" / {WHO -&gt; "world!"} = "Hello world!"</code></li>
</ul>
</li>
</ul>
<br>
<span class="fragment ">
  <p>Each phase leverages templates of different sorts:</p>
<ul>
<li><strong>Individual seeking</strong> templates, e.g. <code>"Give me examples of &lt;CONCEPT&gt;"</code></li>
<li><strong>Relation seeking</strong> templates, e.g. <code>"Give me examples of &lt;PROPERTY&gt; for &lt;INDIVIDUAL&gt;"</code></li>
<li><strong>Best-match</strong> templates, e.g. <code>"What is the best concept for &lt;INDIVIDUAL&gt; among &lt;CONCEPTS&gt;?"</code></li>
<li><strong>Individuals merging</strong> templates, e.g. <code>"Are &lt;INDIVIDUAL1&gt; and &lt;INDIVIDUAL2&gt; the same &lt;CONCEPT&gt;?"</code></li>
</ul>
</span>

</section>
</section><section>


<section data-shortcode-section="">
<h2 id="about-phases-pt-1">About phases (pt. 1)</h2>
<h3 id="population-phase">Population phase</h3>
<div class="multiCol "><!-- 
<div style='width: 25%; '></div> -->
<div style="width: 50%; "><p><img src="./phase-population.png" alt="Population phase pseudocode"></p>
</div>
<div style="width: 50%; "><ol>
<li>
<p>Focus on some class $R \in \mathcal{C}$ (most commonly <code>Thing</code>)</p>
</li>
<li>
<p>For each sub-class $C$ of $R$ (<em>post-order-DFS</em> traversal):</p>
<ol>
<li>using some <em>individual seeking</em> template $t \in \mathcal{T}$:
<ol>
<li>ask $\mathcal{L}$ for <em>individuals</em> of $C$</li>
<li><em>add</em> the individuals to $\mathcal{X}'$</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</div>
</section><section>
<h2 id="about-phases-pt-2">About phases (pt. 2)</h2>
<h3 id="relate-phase">Relate phase</h3>
<div class="multiCol "><!-- 
<div style='width: 25%; '></div> -->
<div style="width: 50%; "><p><img src="./phase-relation.png" alt="Relation phase pseudocode"></p>
</div>
<div style="width: 50%; "><ol>
<li>
<p>Focus on some property $\mathsf{p} \in \mathcal{P}$</p>
</li>
<li>
<p>Let $D$ (resp. $R$) be the <em>domain</em> (resp. <em>range</em>) of $\mathsf{p}$</p>
</li>
<li>
<p>For each individual $\mathtt{i}$ in $D$:</p>
<ol>
<li>using some <em>relation seeking</em> template $t \in \mathcal{T}$:
<ol>
<li>ask $\mathcal{L}$ for <em>individuals related</em> to $\mathtt{i}$ by $\mathsf{p}$</li>
<li><em>add</em> the individuals to $R$</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</div>
</section><section>
<h2 id="about-phases-pt-3">About phases (pt. 3)</h2>
<div class="multiCol "><!-- 
<div style='width: 25%; '></div> -->
<div style="width: 50%; "><p><img src="./phase-redistribution.png" alt="Redistribution phase pseudocode"></p>
</div>
<div style="width: 50%; "><ol>
<li>
<p>Focus on some class $R \in \mathcal{C}$ (most commonly <code>Thing</code>)</p>
</li>
<li>
<p>Let $\mathcal{S}$ be the set of all <em>direct</em> sub-classes of $R$</p>
</li>
<li>
<p>For each individual $\mathtt{i}$ in $R$:</p>
<ol>
<li>using some <em>best-match</em> template $t \in \mathcal{T}$:
<ol>
<li>ask $\mathcal{L}$ what is the <em>best class</em> for $\mathtt{i}$ among the ones in $\mathcal{S}$</li>
<li><em>move</em> $\mathtt{i}$ to the best class</li>
</ol>
</li>
</ol>
</li>
<li>
<p>Repeat for all <em>direct</em> classes in $\mathcal{S}$</p>
<ul>
<li>(this implies a <em>pre-order</em>-DFS traversal)</li>
</ul>
</li>
</ol>
</div>
</div>
</section><section>
<h2 id="about-phases-pt-4">About phases (pt. 4)</h2>
<div class="multiCol "><!-- 
<div style='width: 25%; '></div> -->
<div style="width: 50%; "><p><img src="./phase-merging.png" alt="Merging phase pseudocode"></p>
</div>
<div style="width: 50%; "><ol>
<li>
<p>Focus on some class $R \in \mathcal{C}$ (most commonly <code>Thing</code>)</p>
</li>
<li>
<p>For each sub-class $C$ of $R$:</p>
<ol>
<li>for each <em>pair</em> of <em>syntactically-similar</em> individuals ${\mathtt{i}, \mathtt{j}}$:
<ol>
<li>using some <em>individual-mergin</em> template $t \in \mathcal{T}$:
<ol>
<li>ask $\mathcal{L}$ if $\mathtt{i}$ and $\mathtt{j}$ are the <em>semantically-similar</em></li>
<li>if so, <em>merge</em> $\mathtt{i}$ and $\mathtt{j}$ in $\mathcal{X}'$</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</div>

</section>
</section><section>


<section data-shortcode-section="">
<h2 id="practical-aspects">Practical aspects</h2>
<h3 id="prompt-engineering-pt-1">Prompt-engineering (pt. 1)</h3>
<blockquote>
<p><strong>Problem</strong>: queries may produce <em>verbose</em> and <em>arbitrarily-structured</em> responses, which are <em>costly</em> and hard to <em>parse</em></p>
</blockquote>
<ul>
<li>Q: <code>"can you generate examples of cats?"</code></li>
<li>A:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>Certainly! While I can't physically generate images, I can certainly describe or provide information about different 
</span></span><span style="display:flex;"><span>types of cats. 
</span></span><span style="display:flex;"><span>Here are a few examples:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. Domestic Shorthair:
</span></span><span style="display:flex;"><span>    Description: A common and popular cat breed known for its short, sleek coat.
</span></span><span style="display:flex;"><span>    Characteristics: Versatile in colors and patterns, friendly, and adaptable.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>2. Siamese Cat:
</span></span><span style="display:flex;"><span>    Description: Elegant and slender cat with distinctive color points.
</span></span><span style="display:flex;"><span>    Characteristics: Vocal, social, and known for their striking blue almond-shaped eyes.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>10. Russian Blue:
</span></span><span style="display:flex;"><span>    Description: Short-haired cat with a bluish-gray coat and striking green eyes.
</span></span><span style="display:flex;"><span>    Characteristics: Reserved but affectionate, known for its plush double coat.
</span></span></code></pre></div></li>
</ul>
</section><section>
<h2 id="practical-aspects-1">Practical aspects</h2>
<h3 id="prompt-engineering-pt-2">Prompt-engineering (pt. 2)</h3>
<blockquote>
<p><strong>Solution</strong>: queries should explicitly ask for <strong>conciseness</strong> and <strong>structure</strong> to <em>spend less</em> <br> and <em>simplify parsing</em> the response</p>
</blockquote>
<ul>
<li>Q: <code>"list of cat races, names only"</code></li>
<li>A:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>Certainly, here's a list of cat breeds with names only:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. Persian
</span></span><span style="display:flex;"><span>2. Siamese
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>10. Domestic Shorthair
</span></span></code></pre></div></li>
</ul>
</section><section>
<h2 id="practical-aspects-2">Practical aspects</h2>
<h3 id="avoiding-out-of-context-responses">Avoiding out-of-context responses</h3>
<blockquote>
<p><strong>Problem</strong>: the query may be clear for the user, but <em>ambiguous</em> for the LLM,
<br> which may lead to <em>out-of-context</em> responses</p>
</blockquote>
<ul>
<li>Q: <code>"give me a list of examples of cats"</code></li>
<li>A:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>Certainly! Here are some examples of cats:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. Cat Stevens
</span></span><span style="display:flex;"><span>2. Catwoman
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>10. Cat in the Hat
</span></span></code></pre></div></li>
</ul>
</section><section>
<h2 id="practical-aspects-3">Practical aspects</h2>
<h3 id="avoiding-out-of-context-responses-1">Avoiding out-of-context responses</h3>
<blockquote>
<p><strong>Solution</strong>: provide the context <em>explicitly</em> in the query
<br> Beware! <em>Two</em> contexts are always in place:</p>
<ol>
<li>the <em>domain</em> of the ontology</li>
<li>the <em>ontological</em> jargon itself</li>
</ol>
</blockquote>
<ul>
<li>C: <code>"you're a zoologist creating and ontology about animals species."</code></li>
<li>Q: <code>"give me a list of examples of cats"</code></li>
<li>A:
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="nohighlight" data-noescape=""><span style="display:flex;"><span>Certainly! Here are some examples of cat breeds:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. Persian
</span></span><span style="display:flex;"><span>2. Siamese
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>10. Domestic Shorthair
</span></span></code></pre></div></li>
</ul>
</section><section>
<h2 id="practical-aspects-4">Practical aspects</h2>
<h3 id="mining-relevant-information-from-responses">Mining relevant information from responses</h3>
<blockquote>
<p><strong>Problem</strong>: responses contain <em>way more</em> information than needed, in <em>unstructured</em> form</p>
</blockquote>
<p><img src="./response.png" alt="Example of partially structured response"></p>
<ol>
<li><code>Persian</code>, 2. <code>Siamese</code>, 3. <code>Maine Coon</code>, 4. <code>Bengal</code>, 5. <code>Caracal</code>, 6. <code>Sphinx</code>, …, 10. <code>Domestic Shorthair</code></li>
</ol>
</section><section>
<h2 id="practical-aspects-5">Practical aspects</h2>
<h3 id="mining-relevant-information-from-responses-1">Mining relevant information from responses</h3>
<blockquote>
<p><strong>Solution</strong>: <em>parse</em> the response to <em>extract</em> the relevant information</p>
</blockquote>
<div class="multiCol "><div style="width: 50%; "><p><img src="parsing-grammar.png" alt="Grammar for parsing responses"></p>
</div>
<div style="width: 50%; "><p><img src="./parse-tree.svg" alt="Example of parse tree for the response in the previous slide according to this grammar"></p>
</div>
</div>
</section><section>
<h2 id="practical-aspects-6">Practical aspects</h2>
<h3 id="minimising-financial-costs">Minimising financial costs</h3>
<blockquote>
<p><strong>Problem</strong>: cost model is most commonly <em>proportional</em> to <strong>consumed</strong> <em>and</em> <strong>produced</strong> <em>tokens</em> (words)</p>
</blockquote>
<span class="fragment ">
  <blockquote>
<p><strong>Solution</strong>: ask for <em>conciseness</em> + <em>limit</em> responses’ lengths + exploit <em>caching</em></p>
</blockquote>
<ul>
<li>most <em>API</em> support some <code>max_tokens</code>-like parameter</li>
<li>simple <em>cache mechanism</em> can be implemented, using <em>prompt</em> + <em>parameters</em> as <strong>key</strong></li>
</ul>
</span>
</section><section>
<h2 id="practical-aspects-7">Practical aspects</h2>
<h3 id="handling-rate-limitations">Handling rate limitations</h3>
<blockquote>
<p><strong>Problem</strong>: most LLM services apply <em>rate limitations</em> on a <strong>per-tokens</strong> or <strong>per-requests</strong> basis</p>
</blockquote>
<span class="fragment ">
  <blockquote>
<p><strong>Solution</strong>: apply <a href="https://en.wikipedia.org/wiki/Exponential_backoff">exponential back-off</a> <em>retrial</em> strategy + limit of <em>retries</em></p>
</blockquote>
</span>

</section>
</section><section>
<h2 id="experimental-setup">Experimental setup</h2>
<p>Experiments tailored in the <em>nutritional domain</em></p>
<p>Reference ontology (built for the purpose):
<img src="./ontology_skeleton.svg" alt="Nutritional ontology"></p>
<ul>
<li>plus role: <strong>$Recipe \sqsubseteq \exists\mathsf{ingredientOf}.Edible$</strong> (all <em>recipes</em> are made of <em>edible</em> ingredients)</li>
</ul>
</section><section>
<h2 id="experimented-llms">Experimented LLMs</h2>
<p><img src="./experiments-llms.png" alt="LLM employed for our experiments"></p>
</section><section>
<h2 id="evaluation-criteria-pt-1">Evaluation criteria (pt. 1)</h2>
<h3 id="types-of-errors">Types of errors</h3>
<ul>
<li>
<p><strong>Misplacement</strong> error ($E_{mis}$): the <em>individual</em> “belongs” the ontology, but it is <em>assigned to the wrong class</em></p>
<ul>
<li>e.g. $\mathtt{garfield} : Aniamal$, when $Cat \sqsubset Animal$ exists</li>
<li>or $\mathtt{tom} : Mouse$</li>
</ul>
</li>
<li>
<p><strong>Incorrect individual</strong> error ($E_{ii}$): the <em>individual makes no sense</em> in the ontology, yet it has a <em>meaningful</em> name</p>
<ul>
<li>e.g. $\mathtt{catwoman} : Cat$</li>
</ul>
</li>
<li>
<p><strong>Meaningless individual</strong> error ($E_{mi}$): the <em>individual</em> makes <em>no sense</em> <strong>at all</strong></p>
<ul>
<li>e.g. $\mathtt{asanaimodelblablabla} : Mouse$</li>
</ul>
</li>
<li>
<p><strong>Class-like individual</strong> ($E_{ci}$): the <em>individual</em> has a <em>name</em> which is <em>very similar</em> to the one of a <em>concept</em> in the ontology</p>
<ul>
<li>e.g. $\mathtt{cat} : Cat$</li>
</ul>
</li>
<li>
<p><strong>Duplicate individuals</strong> ($E_{di}$): the <em>individual</em> is a <em>semantic duplicate</em> of another one in the ontology</p>
<ul>
<li>e.g. $\mathtt{pussy}, \mathtt{kitty} : Cat$</li>
</ul>
</li>
<li>
<p><strong>Wrong relation</strong> ($E_{wr}$): the <em>relation</em> connecting <em>two individuals</em> is <em>semantically wrong</em></p>
<ul>
<li>e.g. $\mathsf{ingredientOf}(\mathtt{pineapple}, \mathtt{pizza})$ 😇</li>
</ul>
</li>
</ul>
</section><section>
<h2 id="evaluation-criteria-pt-2">Evaluation criteria (pt. 2)</h2>
<h3 id="metrics">Metrics</h3>
<ul>
<li><strong>$TI$</strong>: <em>total</em> amount of generated <em>individuals</em> in the whole ontology</li>
<li><strong>$minCW$</strong> (resp. <strong>$maxCW$</strong>): minimum (resp. maximum) <em>class weight</em>, i.e. amount of individuals <em>in a class</em></li>
<li><strong>$TL$</strong>: <em>total</em> amount of individuals in <strong>leaf</strong> classes</li>
<li><strong>$TE$</strong>: <em>total</em> amount of individuals <em>affected by errors</em></li>
<li><strong>$RIE = \frac{TE}{TI}$</strong>: <em>relative</em> amount of individuals <em>affected by errors</em> w.r.t. the <em>total</em> amount of individuals</li>
<li><strong>$E_{mis}$</strong>, <strong>$E_{ii}$</strong>, <strong>$E_{mi}$</strong>, <strong>$E_{ci}$</strong>, <strong>$E_{di}$</strong>, <strong>$E_{wr}$</strong>: total amount of errors for each type of error</li>
<li><strong>$TR$</strong>: <em>total</em> amount of <em>role</em> assertions in the whole ontology</li>
<li><strong>$RRE = \frac{E_{wr}}{TR}$</strong>: <em>relative</em> amount of <em>role</em> assertions <em>affected by errors</em> w.r.t. the <em>total</em> amount of <em>role</em> assertions</li>
</ul>
</section><section>
<h2 id="results">Results</h2>
<p><img src="./experiments-results.png" alt="LLM employed for our experiments"></p>
<ul>
<li>Errors are spotted by <em>manual</em> inspection!</li>
</ul>
</section><section>
<h2 id="highlights">Highlights</h2>
<ul>
<li><strong>Mistral</strong> gives the <em>bigger</em> ontolgoies, but with <code>~21.6%</code> $RIE$</li>
<li><strong>GPT-3</strong> gives the <em>smaller</em> ontologies, but with <code>~8.6%</code> $RIE$</li>
<li>Overall, most experiments’ $RIE$ is <em>below</em> <code>25%</code> (except for <strong>Mixtral</strong>)</li>
<li><strong>GPT-*</strong> have the <em>best</em> $RIE$</li>
</ul>
</section><section>
<h2 id="about-the-implementation">About the implementation</h2>
<ul>
<li>
<p>Code: <a href="https://github.com/Chistera4-Expectation/kg-filler">https://github.com/Chistera4-Expectation/kg-filler</a></p>
</li>
<li>
<p>Experiment data: <a href="https://github.com/Chistera4-Expectation/knowledge-graphs">https://github.com/Chistera4-Expectation/knowledge-graphs</a></p>
<ul>
<li>each experiment is on a different <em>branch</em>:
<pre tabindex="0"><code>experiments/food-SERVICE-MODEL-DATE-HOUR-ID
</code></pre></li>
</ul>
<p><img src="./experiments-branches.png" alt="Experiment branches on GitHub"></p>
</li>
</ul>
</section><section>
<h2 id="about-the-experiments">About the experiments</h2>
<p>Each <em>commit</em> of each experiment <em>branch</em> represents a <em>consistent</em> update to the ontology:</p>
<p><img src="./experiments-commits.png" alt="Commits in the experimental branches on GitHub"></p>
<ul>
<li>this was very useful in the <em>fine-tuning</em> phase of the algorithm</li>
</ul>
</section>

  


</div>
      

    </div>
<script type="text/javascript" src="/presentation-llm4kg/reveal-hugo/object-assign.js"></script>

<a href="/presentation-llm4kg/reveal-js/dist/print/" id="print-location" style="display: none;"></a>

<script type="application/json" id="reveal-hugo-site-params">{"custom_theme":"custom-theme.scss","custom_theme_compile":true,"custom_theme_options":{"enablesourcemap":true,"targetpath":"css/custom-theme.css"},"height":"1080","highlight_theme":"solarized-dark","history":true,"mermaid":[{}],"slide_number":true,"theme":"league","transition":"slide","transition_speed":"fast","width":"1920"}</script>
<script type="application/json" id="reveal-hugo-page-params">null</script>

<script src="/presentation-llm4kg/reveal-js/dist/reveal.js"></script>


  
  
  <script type="text/javascript" src="/presentation-llm4kg/reveal-js/plugin/markdown/markdown.js"></script>
  
  <script type="text/javascript" src="/presentation-llm4kg/reveal-js/plugin/highlight/highlight.js"></script>
  
  <script type="text/javascript" src="/presentation-llm4kg/reveal-js/plugin/zoom/zoom.js"></script>
  
  <script type="text/javascript" src="/presentation-llm4kg/reveal-js/plugin/notes/notes.js"></script>
  
  
  <script type="text/javascript" src="/presentation-llm4kg/reveal-js/plugin/notes/notes.js"></script>




<script type="text/javascript">
  
  
  function camelize(map) {
    if (map) {
      Object.keys(map).forEach(function(k) {
        newK = k.replace(/(\_\w)/g, function(m) { return m[1].toUpperCase() });
        if (newK != k) {
          map[newK] = map[k];
          delete map[k];
        }
      });
    }
    return map;
  }

  var revealHugoDefaults = { center: true, controls: true, history: true, progress: true, transition: "slide" };

  var revealHugoPlugins = { 
    plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
   };
  var revealHugoSiteParams = JSON.parse(document.getElementById('reveal-hugo-site-params').innerHTML);
  var revealHugoPageParams = JSON.parse(document.getElementById('reveal-hugo-page-params').innerHTML);
  
  var options = Object.assign({},
    camelize(revealHugoDefaults),
    camelize(revealHugoSiteParams),
    camelize(revealHugoPageParams),
    camelize(revealHugoPlugins));
  Reveal.initialize(options);
</script>






  

  

  



    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
</script>

<script type="text/javascript" id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js">
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

<script>
  if (/.*?(\?|&)print-pdf/.test(window.location.toString())) {
      var ytVideos = document.getElementsByTagName("iframe")
      for (let i = 0; i < ytVideos.length; i++) {
          var videoFrame = ytVideos[i]
          var isYouTube = /^https?:\/\/(www.)youtube\.com\/.*/.test(videoFrame.src)
          if (isYouTube) {
              console.log(`Removing ${videoFrame.src}`)
              var parent = videoFrame.parentElement
              videoFrame.remove()
              var p = document.createElement('p')
              p.append(
                  document.createTextNode(
                      "There was an embedded video here, but it is disabled in the printed version of the slides."
                  )
              )
              p.append(document.createElement('br'))
              p.append(
                  document.createTextNode(
                      `Visit instead ${
                          videoFrame.src
                      } or ${
                          videoFrame.src.replace(
                              /(^https?:\/\/(www.)youtube\.com)\/(embed\/)(\w+).*/,
                              "https://www.youtube.com/watch?v=$4"
                          )
                      }`
                  )
              )
              parent.appendChild(p)
          }
      }
  }
</script>


    
  

</body></html>